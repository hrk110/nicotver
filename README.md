# nicotver
TVerの画面上にニコニコ実況のコメントを流すChrome拡張です。

## 感謝

コメントはこちらから取得します。感謝。  
https://jikkyo.tsukumijima.net/  

コメントの描画にはこちらを使用しています。感謝。  
https://github.com/xpadev-net/niconicomments



## 使い方

### インストール

このリポジトリをクローンしてビルドします。
```sh
git clone git@github.com:nyankomaher/nicotver.git
cd nicotver
npm install
npm run build
```

ビルド物がnicotver/buildに出力されるので、chromeにインストールします。  
手順は「パッケージ化されていない拡張機能を読み込む」というキーワードでぐぐれば出てきます。

### 操作

TVerの再生ページ（ https://tver.jp/episodes/* ）を開くと、動画の下にnicotverの操作フォームが追加されます。  
チャンネル、開始日時、番組時間（コメントを何分ぶん取得するか）を指定し、コメント取得ボタンを押下します。  
チャンネルと開始日は可能であれば初期値が入力されますが、開始時刻と番組時間は自分で番組の放送スケジュールを調べて入力する必要があります。  
「コメントを再生する準備が完了しました！」と表示されれば正常にコメントが取得できています。
あとは普通にTVerを視聴すればコメントが流れます。

#### コメント時間オフセット

ご存知のように、ニコニコ実況では地上波・衛星の放送に対してコメントが投稿されています。
しかしそれらの放送とTVerの放送ではCMが入るタイミングと量が異なるため、CMのタイミングで動画とコメントの内容にずれが生じます。
これは解決したい問題ですが、いかにもできそうにありませんので、表示するコメントの時間をずらす機能（コメント時間オフセット）を実装しています。
コメント時間オフセットを指定すると、「現在の動画再生時間＋コメント時間オフセット」時点のコメントが表示されるようになります。
動画とコメントの内容がずれているなと思ったら、そのタイミングでコメント時間オフセットを調整してください。


## 注意事項

- コメントの取得元は個人が善意で運営しているものです。無用な負荷をかけないようお願いします。
- コメントの取得元はリアルタイムでコメントを収集しているわけではないので、直近のコメントは取得できないことがあります。

## TODO

- 開始日時と番組時間の正確な初期値を取得する → どっかのサイトのスクレイピングが必要になるっぽいのでやらない
- 全画面表示にした際に操作フォームが表示されなくなる → 気が向いたら